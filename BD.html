<html>

<head>
<meta charset="utf-8">
</head>
<body>
ВИДЕО: ТЕСТ БД <br>
бд - это место, где хранится вся инфа, которую использует ПО ( файл\набор взаимосвязанных файлов)<br>
БД - это место, где ПО хранит все свои данные <br>
Типы БД:<br>
иерархические - есть корневой узел, из него идет еще один, и каждый узел делится еще на узлы(предок-потомок )(в виде дерева)<br>
сетевые - связи многие ко многим, многие к 1( в виде сети)<br>
реалиционные - набор связанных таблиц <br>
<br>
первичный ключ - уникальный идентификатор строки главной таблицы(id, может быть любое уникальное значение, типа имейл\тел,<br>
 но времязатратно искать их в таблице )<br>
внешний ключ - внешний ключ связывает таблицы, которые имеют общие данные по уникальному идентификатору (столбцу)<br>
возможна таблица, состоящая только из айдишников, которые связаны с другими таблицами<br>
внешний ключ необязателен , нужен чтобы связать таблицы , чтобы ввести закономерности связи между таблицами<br>
<br>
СУБД(sql и nosql) - совокупность языковых и программных средств, которые позволяют создавать, изменять, удалять данные<br>
бд - это обьект и это набор данных<br>
субд - это субьект, который управляет нашими данными и это программное обеспечение(mysql, допустим)<br>
субд: mysql, MS sql,oracle, postgre sql, mongodb<br>
nosql - скорость работы выше <br>
<br>
сущности БД: ( тестерам в основном нужны селекты )<br>
1.пользователи <br>
2.раразрешения для этих пользователей<br>
3.таблицы<br>
4.базы данных<br>
5.строки <br>
<br>
Отношение:<br>
-1 к 1 - 1 запись в 1 таблице соответствует 1 записи в другой таблице (юзер : инн, номер паспорта)<br>
-1 к многим -  1 запись в 1 таблице соответствует нескольким записям в другой таблице (1 город - много юзеров)(1 юзер-много городов(командировки))<br>
-многие ко многим - несколько записей в 1 таблице соответствует нескольким записям <br>
в другой таблице (делается с помощью 3 таблиц, города - юзеры- соотношение город и юзер)<br>
<br>
sql - язык общения с БД<br>
sql нужнен, чтобы делать то, что невозможно сделать на ui<br>
для чего это нужно нам: <br>
-поиск тестовых данных( баг воспроизводится у юзера с какими-то условиями, эти условия можно прописать в запросе к БД)<br>
-создание тестовых данных<br>
-проще залезть в бд и узнать id юзера, чем искать в консоли <br>
-когда нужно добавить много тестовых сущностей ( создать 10к позиций)<br>
<br>
обьекто-ориентированное тестирование - исходим из сущностей, которые есть в системе, и из операций, которые мы можем сделать над этими сущностями<br>
задача любого приложения-дать юзеру возможность работать с данными , которые хранятся на бэкенде<br>
бизнес логика- это логика на сервере , которая работает с данными в таблицах в БД, в ней <br>
заложены операции(допустим, при создании аккаунта 2 операции: создание аккаунта и создание юзера)<br>
при создании аккаунта ,при запросе с ui идет запрос на бэк и там контроллер совершает 2 операции: создание аккаунта и создание юзера, <br>
после чего происходит отображение на ui <br>
<br>
индекс - это способ выделить отдельные столбцы в таблице для более быстрого поиска <br>
создаются отдельные таблицы в виде дерева, чтобы доступ к этим полям был быстрее<br>
если добавить индексы в каждое поле , доступ к этим полям будет медленнее, чем , если бы индексов не было<br>
<br>
Если вы ввели на фронте в поле зарплата набор букв и это отправилось и сохранилось в бд, то это баг на фронте, бэке, бд. Делаем 3 баг репорта отдельно<br>
<br>
фронт тестим для обычных юзеров, апи тестим для продвинутых юзеров, бд для кодеров???????<br>
<br>
мы делаем запросы sql в БД , которые соответствуют действиям на фронте и должны получить ту же инфу,<br>
что на фронте, только в БД (минуя фронт и апи)<br>
<br>
<br>
<br>
<br>
<br>
Нормализация БД - эффективная организация данных в БД
- удаление одинаковых данных в разных таблицах
- обеспечение оправданной связи между ними
Нормальная форма - набор правил , которым должна отвечать БД 
Избыточность данных приводит к снижению производительности, уменьшению удобства управления данными.
<br>
1 нормальная форма - 1 ячейка содержит 1 значение(в одной ячейке не может быть значений через запятую) <br>
Пример: <br>
  фио       урок<br>
иванов |   русский <br>
иванов |  математика<br>
сидоров |  физика<br>
максимов |  химия<br>
<br>
2 нормальная форма - каждый неключевой атрибут зависит от первичного ключа(ключевого атрибута) <br>
Атрибут это заголовок столбца, сущность в ячейке атрибута это значение<br>
Ключевой атрибут(первичный ключ) не зависит от другого атрибута, однозначно идентифицирует таблицу\сущность в базе данных, уникален и вечен<br>
Неключевой зависит от ключевого(первичного ключа), не идентифицирует таблицу в базе данных, это любой атрибут кроме первичного ключа(ключевого атрибута)<br>
Первичный ключ(ключевой атрибут) – это одно или несколько уникальных полей (столбцов), комбинация значений которых однозначно определяет каждую запись в таблице.<br>
Пример: <br>
id        фамилия     - 1 таблица , id это первичный ключ<br>
1         иванов<br>
2         сидоров <br>
       |        <br>
       |                - связь 1 и 2 таблицы (здесь связь 1 ко многим)<br>
       |<br>
id        teacher_id        урок        - 2 таблица , teacher_id это внешний ключ (указываем при создании дочерней таблицы <br>
                                          какое поле будет внешним ключом и на какое поле из главной таблицы оно будет указывать)<br>
1             1            русский<br>
2             1            физика<br>
3             2            химия<br>
<br>
3 нормальная форма - выносить все неключевые атрибуты, значение которых может относиться к нескольким записям таблицы в отдельные таблицы.<br>
пример:<br>
модель                 магазин            тел <br>
бмв                   риал-авто           11111111     <br>
ауди                  риал-авто           11111111      <br>  
ниссан                некст-авто          22222222<br>
<br>
телефон не зависит о модели, а зависит от магазина , значит делаем отдельную таблицу,где будет магазин и телефон<br>
магазин                телефон<br>
риал-авто              11111111<br>
некст-авто             22222222<br>
<br>
<br>
<br>
<br>
денормализация <br>
- сокращение таблиц, чтобы ускорить работу сервера, сокращение кол-ва запросов к БД<br>
- введение доп поля в одну из таблиц <br>
<br>
<br>
<br>
<br>
DDL - манипуляция с таблицами (язык определения данных)  create alter drop<br>
DML - манипуляция с записями  (язык изменения данных)  select insert update delete<br>
DCL - дает права юзеру и отменяет права юзера (язык управления данными)  grant revoke<br>
<br>
<br>
<br>
<br>
Миграции БД <br>
Для управления кодом есть git, а для СУБД миграции.<br>
Это односторонний путь, который заканчивается после того, как вся информация будет доставлена в целевое место,в строго определенном порядке. <br>
Если есть 2 миграции, одна из которых создает таблицу users,другая добавляет в нее тестовых пользователей, мы выполняем эти <br>
скрипты именно в таком порядке, чтобы не добавить при этом данные в базу больше одного раза.<br>
Версия базы данных — определенное состояние структуры базы данных. <br>
Обычно у версии есть номер, связанный с номером версии приложения.<br>
Миграция - обновление структуры базы данных от одной версии до другой (более новой).<br>
При поставке новой версии приложения в продакшн, нужно обязательно обновлять и версию базы данных, иначе приложение не сможет правильно работать.<br>
Нужна при:<br>
-модернизация или замена устаревшего ПО<br>
-расширение системы и емкости хранения<br>
-перенос в облако<br>
-переносе базы данных с одной СУБД на другую (MySQL => Oracle)<br>
<br>
В проекте создаем отдельную папку sql, куда складываем sql-файлы со скриптами, которые меняют содержимое базы,(можно хранить в виде XML <br>
или других форматов, которые поддерживаются вашей СУБД.)<br>
В файле будут храниться команды CREATE TABLE, CREATE PROCEDURE, и т.д., которые создают всю базу данных с нуля.<br>
Также один php-файл, который эти миграции и накатывает.<br>
<br>
Интеграция БД заключается в объединении данных из источников вне и внутри компании в одну БД<br>
Может быть непрерывным процессом, который включает потоковую передачу данных в реальном времени и обмен информацией между системами.<br>
<br>
<br>
<br>
<br>
ACID:набор правил, которые обеспечивают сохранность ваших данных (атомарность , согласованность, изолированность, надежность)<br>
Атомарность  -  отдельная пачка запросов, чтобы не было потеряно ни одного запроса, либо выполнены все либо ни одного(происходит откат при ошибке)<br>
Согласованность  -  перевод системы из одного согласованного состояния (до транзакции) в другое согласованное состояние (после транзакции)<br>
бэк пишет код, который пошагово переводит систему в нужное согласованное состояние, если по пути происходит ошибка, то происходит откат.<br>
Изолированность  -  во время выполнения транзакции, параллельные транзакции не должны влиять на ее результат.<br>
Варианты:блокировка:блокировка данных в БД, записи \таблицы, на редактирование\чтение <br>
         версии: при каждом обновлении создается новая версия данных и сохраняется старая.Пока транзакция, обновляющая запись, <br>
                 не покомитит свое изменение, остальные юзеры читают старую версию записи и не блокируются.<br>
Надежность  -  Если юзер получил подтверждение ,что транзакция выполнена, он может быть уверен, что сделанные им изменения <br>
не будут отменены из-за ошибки\сбоя.  <br>
<br>
Транзакция — архив для запросов(пачка запросов)(чтобы не было потеряно ни одного запроса, либо выполнены все либо ни одного(происходит откат при ошибке))<br>
Чтобы обратиться к БД нужно сконнектиться с ней (образовать трубу), мы посылаем архив запросов, труба освобождается и мы можем послать еще один архив запросов <br>
Транзакция: открывается, выполняется, закрывается.<br>
Пул соединений - количество свободных труб для отправки транзакций.<br>
Текущие коннекты(трубы) переиспользуют, вместо того , чтобы открывать новые.<br>
<br>
Аномалия - ситуация в таблице БД, приводит к противоречию в БД либо существенно усложняет обработку БД. <br>
Причина - излишнее дублирование данных в таблице, которое вызывается наличием функциональных зависимостей от неключевых атрибутов.<br>
Аномалии-модификации: изменение одних данных может повлечь изменение некоторых записей таблицы.<br>
Аномалии-удаления: при удалении кортежа(строки) из таблицы может пропасть информация, которая не связана на прямую с удаляемой записью.<br>
Аномалии-добавления: информацию в таблицу нельзя поместить, пока она не полная или вставка записи требует дополнительного просмотра таблицы.<br>
<br>
CRUD - акроним, обозначающий 4 базовын операции<br>
create(post)<br>
read(get)<br>
update(put)<br>
delete (delete)<br>
<br>
</body>
</html>