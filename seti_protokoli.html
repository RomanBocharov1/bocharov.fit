<html>

<head>
<meta charset="utf-8">
</head>
<body>
<br>
Стек протоколов TCP\IP: <br>
 -прикладной <br>
 http(веб), smtp(передача почты), dns(ip адреса), ftp(передача файлов) <br>
 -транспортный <br>
 tcp(гарантирует доставку), udp(не гарантирует доставку, но быстрый) <br>
 -сетевой  <br>
 ip <br>
 -сетевых интерфейсов (сетевые технологии) <br>
 ethernet(изернет- проводной интернет),wi-fi(беспроводной интернет), dsl(модем) <br>
<br>
хост - единица сети, имеющая интерфейс(если не будет интерфейса, то хост не будет участником сети)<br>
<br>
ip -адрес - это идентификатор интерфейса, у каждого интерфейса есть свой ip -адрес, каждая сетевая карта имеет ip-адрес <br>
ip -адрес - 4 числа через точку, каждое от 0 до 255. Каждый ip -адрес занимает 32 бита, по 8 бит на каждое число, <br>
больше эти числа физически занять не смогут.(и чтобы лишняя цифра не затесалась)<br>
ip-адрес может быть статическим и динамическим (присвавиваться новый при каждом включении компа)<br>
ip-адрес состоит из номера сети(192.168.5) и номера хоста\узла сети(11) - 192.168.5.11<br>
ip-адрес может с номером сети 192.168 и номером хоста 5.11 или с номером сети 192.168.5 и номером хоста 11-это будут разные адреса<br>
белый ip -адрес - адрес, который есть только у меня и им никто не пользуется<br>
серый ip -адрес - при каждом выходе в интернет(включении компа) провайдер выдает свободный ip-адрес <br>
внутренний ip -адрес - используются только в локальных сетях, но не работают <br>
в остальном интернете(при запросе во внешний интернет внутренний ip-адрес заменяется на внешний),провайдер экономит деньги на покупках ip-адресов,<br>
также достучаться из внешнего интернета до внутреннего айпишника невозможно<br>
внешний ip -адрес - используется везде<br>
внутренние ip выходят во внешний интернет через внешний ip (1 ip?ip роутера?)<br>
белый\внешний ip виден из внешнего интернета,за пределами локальной сети провайдера. <br>
сервер при запросе видит не ip роутера,как обычно, а белый ip,мой.<br>
также можно зайти на мой комп из другой сети, если в домашней сети у меня установлен внешний ip (зайти на локалку?)<br>
ipv4- ip -адрес версии 4 (192.168.1.255) - старый<br>
ipv6 - новые ip-адреса, больше диапазон<br>
NAT(network adress translation) - с помощью этого роутер изолирует домашнюю сеть.Если идет ответ из внешней сети, то роутер отдает его тому , <br>
кто запросил(т.к. внутренний ip юзера не может выйти во внешннюю сеть), т.е запоминает от кого был запрос. <br>
если идет запрос во внешний интернет через wan, то сайт видит ip нашего роутера, а не нашей сетевой карты<br>
wan(world area network) - вход сзади роутера, интерфейс для выхода во внешнюю сеть.<br>
NAT - изоляция внутренней сети<br>
WAN - выход во нешнюю сеть <br>
<br>
Диапазон сети-группа компов, которые видят друг друга.<br>
каждая сеть имеет размер (маска сети задает размер сети)<br>
маска подсети это инструкция, как читать ip-адрес<br>
<br>
маска: 192.168.1.0     подсеть будет от 192.168.1.0 до 192.168.1.255<br>
       255.255.255.0   <br>
<br>
если хотим сделать сеть больше, то отрезается всегда с конца:<br>
если нужна сеть от 192.168.0.0 до 192.168.1.255<br>
то маска будет 255.255.254.0<br>
255.255.255.0(0 -номер хоста) - группа ip-адресов группы С<br>
/8 - группа А (1 цифра в ip-адресе это номер сети)<br>
/16 - группа В (1 и 2 цифра в ip-адресе это номер сети)<br>
/24 - группа С (1,2 и 3 цифра в ip-адресе это номер сети)<br>
<br>
интернет - большое количество сетей, связанные друг с другом. 0.0.0.0\0 - весь интернет.<br>
роутер - устройство, у которого 2 интерфейса, каждый из которых находится в разных сетях.<br>
<br>
проброска порта - чтобы внешний интернет имел доступ к сайту(например) в нашей сети(сервер , где файлы сайта <br>
,находится на одном из компов в нашей сети).<br>
Прописывается правило для роутера, что он может пробросить запрос внутрь сети, доступ к чему-то одному.<br>
0.0.0.0:80 - когда будет запрос из внешнего интернета на определенный ip и порт 80, тогда запрос проходит к нашему сайту (ip должен быть статическим)<br>
<br>
сервер- компьютер, который предоставляет услугу(точнее ПО , которое находится на нем, отвечающее за это)<br>
(комп большой\маленький не важно, какая операционка не важно)<br>
<br>
толстый клиент - основной функционал находится на клиенте (игра ставится на комп, играется на компе, роль сервера это хранение статистики и профиля )<br>
тонкий клиент - основной функционал находится на сервере ( браузер, все приходит с бэка(сервера))<br>
<br>
мас - адрес - физический адрес, на него приходят настройки от dhcp после широковещательным запроса от компьютера,<br>
 который появился в сети.мак-адрес -  физический адрес, который назначается заводом-изготовителем <br>
 первичный адресат, чтобы компьютер узнал вас в первый раз как-то<br>
 допустим при смене роутера и при его подключении интернета не будет, нужно звонить провайдеру, чтобы он <br>
 сменил мак-адрес роутера(чтобы интернет пошел на него) <br>
 провайдер фиксирует мак-адрес каждого роутера(пользователя)<br>
 можно зайти на новый роутер и прописать мак-адрес старого роутера и интернет появится<br>
 <br>
 днс-сервер - это таблица, которая хранит соответствие, такой- то ip = такой-то адрес(домен, имя сайта)<br>
 <br>
 протокол - набор правил, как взаимодействует между собой клиент и сервер <br>
 <br>
 У каждого протокола есть свой порт<br>
 когда мы делаем запрос к серверному приложению, то указывается порт протокола ( допустим http:80)<br>
 порт - это число от 1 до 65353<br>
 пример: роутер - это многоэтажный дом, порт - квартира <br>
 <br>
 если у приложения нет порта, значит не будет доступа к нему <br>
 2 приложения не могут занимать один и тот же порт <br>
 1 приложение может занимать несколько портов(использовать разные службы)<br>
 порты стоят у протоклов по умолчанию( допустим http:80) , но их можно менять <br>
 <br>
 vpn (virtual private network) - виртуальная частная сеть<br>
 ставим vpn -клиент себе,подключаемся к vpn-серверу <br>
 создается проброска порта и нам выдаются настройки той сети, в которой находится vpn-сервер<br>
 создается туннель в сеть, у нас есть доступ ко всему в этой сети, будто мы участник этой сети<br>
 ЭТО ВСЕ НЕ ТОЧНО<br>
<br>
<br>
<br>
<br>
<br>
ПРОТОКОЛЫ:
HTTP (hyper text transfer protocol) - протокол передачи гипертекста<br>
Запрос HTTP:<br>
1.Метод: <br>
GET - получение данных с сервера <br>
POST - создание новой сущности на сервере<br>
PUT - внесение изменения в уже существующую сущность<br>
DELETE - удаление существующей сущности<br>
гет делает селект из БД, <br>
пост делает инсерт в БД, <br>
пут - обновление существующих записей в БД(update на уровне БД), <br>
delete - delete на уровне БД<br>
2. url (путь, куда обращаемся) и параметры (опционально)<br>
протокол-доменное имя сайта(хост)-порт-ресурс-path параметры(детализация ресурса)-квери параметры(для фильтрации запроса,начинаются после ?)                                     
после # идет конечный компонент урла<br>
3.Headers(заголовки) - сервер получает инфу из хедеров в каком формате передается тело, в каком <br>
виде будет запрос и в каком виде должен быть ответ<br>
(содержат описание данных и информацию, необходимую для взаимодействия между клиентом и сервером)<br>
стандартные - используются в http<br>
нестандартные - используются для сервисов(микросервисов?)<br>
если сервер понимает, что он может обработать эти данные, то идет обработка информации, если нет, то выдает ошибку<br>
4.Body (тело) - данные которые нужно сохранить на сервере<br>
Ответ HTTP:<br>
1.Статус код:<br>
1хх - информационные<br>
2хх - успешная операция<br>
3хх - перенаправление<br>
4хх - ошибка клиента<br>
5хх - ошибка сервера<br>
2.Headers(заголовки)<br>
3.Body (тело)<br>
Комментарий: Если после слеша нет ресурса после домена, то запрашивается дефолтная страница - индекс<br>
<br>
<br>
<br>
TCP\IP - набор правил , по котрым происходит обмен информацией.<br>
TCP (transfer control protocol), с подтверждением доставки, где нужна точная доставка <br>
всех данных: сайт(если в коде не дойдут символы, то верстка поедет и т д ), письма  <br>
- установление соединения между двумя устройствами и передача данных<br>
- конторлирует оптимальный размер пакета данных  <br>
- осуществляет новую посылку при сбое(чтобы дошла вся инфа)<br>
<br>
<br>
<br>
IP (internet protocol)<br>
-служит для доставки сетевого пакета данных по нужному адресу<br>
-инфорация разбивается на пакеты, которые независимо идут до адреса(если потерялся один, остальные дойдут)<br>
Каждый ПК имеет свой IP<br>
Любое приложение на ПК, связанное с сетью прикрепляется к порту(чтобы была связь с сетью)<br>
IP - адрес Порт - квартира (вместе это сокет)<br>
<br>
<br>
<br>
UDP(очень быстрый,т.к. не посылает еще раз пакет данных, если будет сбой), без подтверждения доставки(звонок по скайпу, онлайн видео)<br>
<br>
<br>
<br>
FTP(надежная передача) - доступ к файловой системе сервера<br>
Если будет сбой,то передача останавливается.<br>
Используют ftp-клиенты.(нужен ftp-сервер и ftp-клиент)<br>
Все передаётся в открытом виде: файлы, пароли.(но можно использовать FTPS)<br>
Не нужен вэб-интерфейс(сайт)<br>
Любое соединение требует логин и пароль(можно установить их на отдельный ресурс или файл)<br>
Чтобы сделать файлы доступными для всех, используют анонимный режим. (логин anonymous,пароль — email)<br>
<br>
<br>
<br>
DNS<br>
<br>
<br>
<br>
NTP(синхронизация локальных часов с часами в сети)<br>
<br>
<br>
<br>
smtp(передача почты)<br>
<br>
<br>
<br>
SSH (шифруется весь траффик)- протокол удаленного управления ОС, передача паролей и т.д.<br>
<br>
<br>
<br>
snmp -  отслеживает используемые сетевые устройства (устройство должно иметь ip и использовать определенное ПО)<br>
с помощью него сисадмин выполняет мониторинг сети (оценка производительности и изменение конфигурации устройств)<br>
наличие интерфейса с автоматическими оповещениями и другими командами.<br>
Нужен для: перенастройка IP-адресов, сброс используемых паролей, сбор информации о текущих ошибках и т д <br>
<br>
<br>
<br>
Telnet — это текстовый сетевой протокол,позволяет клиенту общаться с удаленным компьютером(сейчас в основном<br>
 используется ssh,т.к. телнет не использует шифрование)<br>
-подключаться к удалённым компьютерам;<br>
-проверить порт на наличие доступа;<br>
-использовать приложения, которые доступны только на удалённых машинах<br>
-обеспечивать другим юзерам доступ к данным, размещённым на своём компьютере.<br>
<br>
<br>
<br>
<b>Вэб-сокеты</b> (протокол передачи данных между клиентом и сервером)<br>
сообщают , если что-то изменилось или случилось<br>
Используются в приложениях реального времени, чатах<br>
ws:(нешифрованное)<br>
wss:(шифрованное)<br>
<br>
<br>
<br>
dhcp( dynamic host client protocol) - клиентский протокол динамических хостов  <br>
серверное приложение , которое находится на роутере ,которое слушает запрос от пользователя и<br>
выдает настройки( также следит за арендой ip(если это динамический ip)).Если нужен статический ip, то это прописывает пройвадер в dhcp<br>
( при подключении к сети через тел , допустим, выдает ip,маску, шлюз и т д) <br>
мы появляемся в сети и кричим широковещательным запросом, dhcp нас слышит и выдает настройки <br>
широковещательный запрос - когда мы обращаемся ко всей сети <br>
роутер может dhcp - сервером <br>
компьютеры работают друг с другом по ip -адресам <br>
dhcp выдает динамический ip юзеру, после того как юзер отключился, ip освобождается и может быть выдан другому юзеру.<br>
Если прописать для каждого ip статику, то айпишники закончатся(используется в кафе, конференциях и т д)<br>
если 2 dhcp в сети, то настройки выдаст тот, до кого широковещательный запрос дойдет первым<br>
<br>
<br>
<br>
Заголовки HTTP<br>
Запрос:<br>
host - домен и поддомен<br>
User-Agent - браузер,ос,язык<br>
Accept-Language - доступные языки<br>
Accept-Encoding - сжатие HTML - кода(страницы)<br>
If-Modified-Since - проверка на обновление страницы,если нет, то берет из кэша<br>
Cookie - файлы куки, может содержать ID сеанса<br>
Referer - если жмем на ссылку на сайте, то эта ссылка отображается в этом заголовке<br>
Ответ: <br>
Cache-Control - кем может быть кэширован ответ,сколько секунд действителен кэш<br>
Content-Type - тип документа(страница, картинка)<br>
Content-Disposition - указывает браузеру открыть окно загрузки файла<br>
Content-Length - размер контента<br>
Etag - отправляется с каждый документом, который кэширует. (нужен ,<br>
 чтобы не кэшировать еще раз документ, а взять из кэша)<br>
 Last-Modified - дата последнего изменения документа<br>
 Location - используется для перенаправления.<br>
 Set-Cookie - сайт хочет установить или обновить файл cookie в <br>
 вашем браузере, он будет использовать этот header.<br>
 WWW-Authenticate - браузер увидит этот header, он откроет диалоговое окно входа в систему.<br>
 Content-Encoding - содержимое сжимается.<br>
 <br>
 <br>
 <br>
 Что происходит, когда набираем адрес сайта в адресную строку<br>
1.Браузер пытается узнать какой IP адрес у сайта<br>
- ищет в истории браузера, если были уже на этом сайте , то IP сохранится в истории<br>
- ищет в операционной системе, там могла сохраниться DNS-запись, если подключение происходило через одно из ПО,<br>
 которое установлено на ПК(c:\windows\system32\drivers\etc\hosts<br>
( в папке можно изменить хост, чтобы был переход локально на нужный IP))<br>
-в кэше роутера(сохраняет история подключений, совершенных из локальной сети)<br>
- после чего(если не нашел) обащается к DNS-серверам<br>
2.После того, как узнал IP отправляет HTTP-запрос на получение контента сайта<br>
3.Сервер ообрабатывает запрос и отправляет ответ браузеру(контент для отображения страницы,cookies и т.д.)<br>
4.Браузер обрабатывает полученный ответ<br>
- загружает HTML - код для отображения страницы в браузере <br>
- стили, скрипты<br>
- картинки, файлы<br>
<br>
бизнес -логика- это код , который управляет данными в БД, записывает их, изменяет или удаляет<br>
если будет какой-то запрос на сервер, то бизнес-логика вызовет какой-то функционал (если пришел гет на такой-то запрос -<br>
вызываем эту функцию, если пришел пост на такой -то запрос -вызываем другую функцию)<br>
<br>
рекурсивный запрос- повторяющийся запрос на сервер, если есть новые данные, то мы их получим, если нет <br>
новых данных, то запрос просто выполнится(курсы валют)<br>
веб-сокет - надстройка над tcp\http, создается туннель со всеми клиентами и , если новые данные поступили , <br>
то сервер отправляет их на клиенты (чат, курсы валют)<br>
<br>
Упрощенная схема:<br>
в браузере есть приложение, в которое загружены js-скрипты, которые могут слать http-запросы, отличные от гета (как делает чисто браузер)<br>
js повесил на кнопки и поля события<br>
при активации этих событий срабатывает функция js - отправить пост запрос куда-нибудь<br>
отправляем запрос, наши веб-сервисы смотрят на наш запрос <br>
на серваке вызывается функционал на этот запрос(работа с данными из БД)<br>
<br>
</body>
</html>